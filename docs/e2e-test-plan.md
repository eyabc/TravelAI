

# ✅ E2E 테스트 계획서 (End-to-End Test Plan)

본 문서는 TravelAI 플랫폼의 핵심 사용자 플로우에 대한 End-to-End 테스트 계획을 정의합니다. 실제 사용자 시나리오에 기반하여 기능 통합 상태와 서비스의 안정성을 검증합니다.

---

## 🎯 테스트 목적

- 주요 사용자 플로우의 정상 동작 확인
- 언어별 번역/큐레이션 흐름 검증
- 프론트-백엔드 연동 정확성 테스트
- 캐시 및 외부 API 연계 정상 동작 보장

---

## 🧪 테스트 대상 시나리오

### 1. 로그인 플로우
- 사용자가 이메일/비밀번호로 로그인 시, 액세스 토큰 및 리프레시 토큰이 정상 발급되는지 확인
- 잘못된 비밀번호 입력 시 오류 응답 확인

### 2. 다국어 UI 적용
- 시스템 언어에 따라 UI 텍스트가 해당 언어로 표시되는지 확인
- 번역 리소스가 누락된 경우 fallback 처리 확인

### 3. 여행 큐레이션 시나리오
- 사용자 입력을 통해 영어로 번역 → GPT 프롬프트 매칭 → 응답 생성 → 모국어 번역 흐름이 전체 작동하는지 확인
- 큐레이션 규칙이 적절히 적용되고 결과에 반영되는지 검증

### 4. 번역 캐시 적용
- 동일 요청 반복 시 Redis에서 cache hit이 발생하는지 확인
- 캐시 TTL 만료 후 새 번역이 정상 수행되는지 테스트

### 5. 프롬프트 규칙 테스트
- YAML 기반 규칙 파일이 정상 로드되는지
- 영어 입력에 대해 적절한 프롬프트가 매칭되는지 확인

### 6. 에러 및 예외 상황
- GPT API 실패 시 fallback 메시지가 출력되는지 확인
- 번역 실패 시 사용자에게 안내 메시지가 제공되는지

---

## 📊 테스트 도구

- Cypress (UI E2E 자동화)
- Playwright (다국어 포함 시나리오 테스트)
- Redis CLI / Monitors (캐시 동작 검증)
- Kibana (에러 로그 확인)

---

## 🧩 추가 체크 항목

- [ ] 비정상 세션일 때 언어 fallback 확인
- [ ] GPT 응답 latency 로깅 확인
- [ ] 모바일 / 태블릿 화면 호환성
- [ ] Edge browser 대응 여부

---

## 📅 테스트 주기

| 유형 | 주기 | 시점 |
|------|------|------|
| 연동 테스트 | 수시 | 주요 기능 개발 완료 시 |
| 회귀 테스트 | 1주 1회 | QA 주간 배포 전 |
| 번역 검증 | 1회 | 리소스 변경 시마다 |
| 캐시 테스트 | 1회 | 캐시 정책 변경 시 |

---

## ✅ 테스트 완료 기준

- 필수 시나리오 100% 통과
- API 응답 지연 2초 이내
- UI 오류 없음, 번역 오류 없음
- 캐시 적중률 70% 이상 유지

---

## 📝 참고 문서

- [translation-fallback-policy.md](./translation-fallback-policy.md)
- [curation-prompt-rules.md](./curation-prompt-rules.md)
- [api-contracts.md](./api-contracts.md)