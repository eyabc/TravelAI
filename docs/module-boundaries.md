

# 📦 모듈 경계 정의 (Module Boundaries)

이 문서는 TravelAI 프로젝트의 주요 도메인 모듈 및 서브모듈 간 경계를 정의하고, 각 모듈의 책임과 인터페이스를 명확히 합니다. 모놀리식 또는 마이크로서비스 형태에 관계없이 명확한 경계는 유지보수성과 확장성에 핵심적인 요소입니다.

---

## 🧭 상위 도메인

```
- `auth`: 사용자 인증 및 토큰 관리
- `user`: 사용자 정보, 로케일 설정 등
- `translation`: 번역 요청 처리, 캐싱, 공급자 연동
- `curation`: 큐레이션 입력 처리, 규칙 매칭, 프롬프트 응답 생성
- `prompt`: 프롬프트 규칙 로딩 및 매칭 엔진
- `admin`: 관리자 인터페이스 및 설정
- `common`: 공통 유틸, 에러 핸들링, 인터페이스
```

---

## 🗂️ 모듈 상세

### 1. `auth`
- 이메일/비밀번호 및 소셜 로그인 처리
- JWT 토큰 발급 및 검증
- 세션 관리 (Refresh Token, Redis 등)

### 2. `user`
- 유저 생성 / 조회 / 갱신
- 언어/로케일 관리
- 유저 등급 및 요금제 정보

### 3. `translation`
- AI 번역 요청 처리 (OpenAI 등)
- 캐시 전략 적용 (Redis + Lua)
- 언어 감지, fallback, glossary 적용

### 4. `curation`
- 사용자 입력 수신 및 전처리
- 영어로 변환 후 prompt 매칭 요청
- 최종 큐레이션 결과 생성 및 언어 역변환

### 5. `prompt`
- YAML 기반 규칙 파일 로딩
- 언어별 프롬프트 분리 및 규칙 매칭
- 관리자 편집 기능 (향후)

### 6. `admin`
- 프롬프트 및 번역 정책 관리
- 서비스 지표 대시보드
- 사용자 권한 제어

### 7. `common`
- 공통 에러 객체 정의
- 공통 인터페이스, DTO
- 로깅, 설정, 예외 필터

---

## 🔌 모듈 간 의존성 방향

```
common  ← 모든 모듈에서 의존
  ↑
auth   ← user
  ↑
translation ← curaton ← prompt
                       ↑
                      admin
```

- `common`은 순환 참조 금지
- 상위 도메인에서 하위 도메인 참조는 허용, 반대는 금지
- 모듈 간 직접 의존이 필요한 경우 interface-only import 권장

---

## 🧪 테스트 기준

- 각 모듈은 독립 테스트 가능해야 함
- 외부 API 연동 시 mock 기반 단위 테스트 필수
- E2E 시나리오는 모듈 간 통합 플로우 기준 작성

---

## 🛣️ 향후 확장 전략

- `translation`, `curation`, `prompt`는 MSA로 분리 가능
- `admin`은 별도 프론트 및 BFF 설계 가능
- 각 모듈은 API Gateway 또는 GraphQL 스키마에 의해 추상화 예정

---
✅ 이 문서는 개발 초기 구조 설계 기준이며, 실제 아키텍처 변화에 따라 업데이트되어야 합니다.